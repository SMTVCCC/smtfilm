# SMTFILM ğŸ¬

<div align="center">

![SMTFILM Logo](https://img.shields.io/badge/SMTFILM-è§†é¢‘æµåª’ä½“å¹³å°-e50914?style=for-the-badge&logo=netflix)

[![Node.js](https://img.shields.io/badge/Node.js-18.0+-339933?style=flat-square&logo=node.js)](https://nodejs.org/)
[![Express](https://img.shields.io/badge/Express-4.18+-000000?style=flat-square&logo=express)](https://expressjs.com/)
[![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=flat-square&logo=html5&logoColor=white)](https://developer.mozilla.org/en-US/docs/Web/HTML)
[![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=flat-square&logo=css3&logoColor=white)](https://developer.mozilla.org/en-US/docs/Web/CSS)
[![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=flat-square&logo=javascript&logoColor=black)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)

**ä¸€ä¸ªç°ä»£åŒ–çš„å…¨æ ˆè§†é¢‘æµåª’ä½“å¹³å°ï¼Œä¸“æ³¨äºæä¾›ä¼˜è´¨çš„å½±è§†å†…å®¹è§‚çœ‹ä½“éªŒ**

[ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ğŸ“– æŠ€æœ¯æ–‡æ¡£](#-æŠ€æœ¯æ¶æ„) â€¢ [ğŸ¯ åŠŸèƒ½ç‰¹æ€§](#-æ ¸å¿ƒåŠŸèƒ½) â€¢ [ğŸ› ï¸ å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)

</div>

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

SMTFILM æ˜¯ä¸€ä¸ªåŸºäº Node.js + Express çš„å…¨æ ˆè§†é¢‘æµåª’ä½“å¹³å°ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„å‰ç«¯æŠ€æœ¯å’Œåç«¯æ¶æ„ï¼Œæä¾›ç±»ä¼¼ Netflix çš„ç”¨æˆ·ä½“éªŒã€‚é¡¹ç›®æ”¯æŒè§†é¢‘æµæ’­æ”¾ã€å®æ—¶å¼¹å¹•ã€å“åº”å¼è®¾è®¡ã€ç®¡ç†åå°ç­‰å®Œæ•´åŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„è§†é¢‘å¹³å°è§£å†³æ–¹æ¡ˆã€‚

### ğŸ¯ è®¾è®¡ç†å¿µ

- **ğŸ¨ ç°ä»£åŒ–UI**: é‡‡ç”¨ Netflix é£æ ¼çš„æš—è‰²ä¸»é¢˜ï¼Œæ¯›ç»ç’ƒæ•ˆæœï¼Œæµç•…åŠ¨ç”»
- **ğŸ“± ç§»åŠ¨ä¼˜å…ˆ**: å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…å„ç§è®¾å¤‡
- **âš¡ é«˜æ€§èƒ½**: è§†é¢‘æµä¼˜åŒ–ï¼ŒHTTP Range æ”¯æŒï¼Œæ‡’åŠ è½½
- **ğŸ”§ æ˜“ç»´æŠ¤**: æ¨¡å—åŒ–æ¶æ„ï¼Œæ¸…æ™°çš„ä»£ç ç»“æ„
- **ğŸš€ å¯æ‰©å±•**: æ”¯æŒåŠ¨æ€å†…å®¹ç®¡ç†ï¼Œæ’ä»¶åŒ–è®¾è®¡

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¥ è§†é¢‘æ’­æ”¾ç³»ç»Ÿ

#### é«˜çº§è§†é¢‘æ’­æ”¾å™¨
- **ğŸ¬ è‡ªå®šä¹‰æ’­æ”¾å™¨**: å®Œå…¨è‡ªå®šä¹‰çš„HTML5è§†é¢‘æ’­æ”¾å™¨
- **â¯ï¸ æ™ºèƒ½æ§åˆ¶**: æ’­æ”¾/æš‚åœã€éŸ³é‡æ§åˆ¶ã€å…¨å±åˆ‡æ¢
- **ğŸ“Š è¿›åº¦ç®¡ç†**: å¯æ‹–æ‹½è¿›åº¦æ¡ï¼Œå®æ—¶è¿›åº¦æ˜¾ç¤º
- **ğŸ¯ ç²¾ç¡®å®šä½**: æ”¯æŒè§†é¢‘ä»»æ„ä½ç½®è·³è½¬
- **ğŸ“± è§¦æ‘¸ä¼˜åŒ–**: ç§»åŠ¨ç«¯æ‰‹åŠ¿æ§åˆ¶æ”¯æŒ

#### è§†é¢‘æµæŠ€æœ¯
```javascript
// HTTP Range è¯·æ±‚æ”¯æŒï¼Œå®ç°è§†é¢‘æµæ’­æ”¾
app.get('/videos/:videoName', async (req, res) => {
    const range = req.headers.range;
    if (range) {
        // è§£æ Range å¤´ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ 
        const parts = range.replace(/bytes=/, "").split("-");
        const start = parseInt(parts[0], 10);
        const end = parts[1] ? parseInt(parts[1], 10) : fileSize - 1;
        
        // è¿”å›éƒ¨åˆ†å†…å®¹ï¼Œæ”¯æŒæ‹–æ‹½å’Œå¿«è¿›
        res.writeHead(206, {
            'Content-Range': `bytes ${start}-${end}/${fileSize}`,
            'Accept-Ranges': 'bytes',
            'Content-Length': end - start + 1,
            'Content-Type': 'video/mp4'
        });
    }
});
```

### ğŸ’¬ å®æ—¶å¼¹å¹•ç³»ç»Ÿ

#### å¼¹å¹•æ ¸å¿ƒåŠŸèƒ½
- **ğŸ“ å®æ—¶å‘é€**: æ”¯æŒå®æ—¶å¼¹å¹•å‘é€å’Œæ¥æ”¶
- **ğŸ¨ æ ·å¼è‡ªå®šä¹‰**: å¤šç§é¢œè‰²ã€å­—ä½“å¤§å°é€‰æ‹©
- **â° æ—¶é—´åŒæ­¥**: å¼¹å¹•ä¸è§†é¢‘æ—¶é—´ç²¾ç¡®åŒæ­¥
- **ğŸ’¾ æŒä¹…åŒ–å­˜å‚¨**: å¼¹å¹•æ•°æ®è‡ªåŠ¨ä¿å­˜åˆ°JSONæ–‡ä»¶
- **ğŸ”„ è‡ªåŠ¨åŠ è½½**: é¡µé¢åˆ·æ–°åå¼¹å¹•æ•°æ®è‡ªåŠ¨æ¢å¤

#### å¼¹å¹•æŠ€æœ¯å®ç°
```javascript
// å¼¹å¹•æ•°æ®ç»“æ„
const danmakuStructure = {
    movieId: {
        episodeId: [
            {
                id: 'unique_id',
                time: 120.5,        // è§†é¢‘æ—¶é—´ç‚¹ï¼ˆç§’ï¼‰
                text: 'å¼¹å¹•å†…å®¹',
                color: '#ffffff',   // å¼¹å¹•é¢œè‰²
                fontSize: 16,       // å­—ä½“å¤§å°
                timestamp: Date.now(), // å‘é€æ—¶é—´æˆ³
                ip: 'client_ip'     // å‘é€è€…IPï¼ˆåŒ¿ååŒ–ï¼‰
            }
        ]
    }
};

// å¼¹å¹•æ¸²æŸ“ç®—æ³•
function renderDanmaku(danmakuList, currentTime) {
    const tolerance = 0.5; // æ—¶é—´å®¹å·®
    return danmakuList.filter(danmaku => 
        Math.abs(danmaku.time - currentTime) < tolerance
    ).map(danmaku => createDanmakuElement(danmaku));
}
```

### ğŸª è½®æ’­å±•ç¤ºç³»ç»Ÿ

#### æ™ºèƒ½è½®æ’­
- **ğŸ–¼ï¸ æµ·æŠ¥è½®æ’­**: ç²¾ç¾çš„é¦–é¡µæ¨èå†…å®¹å±•ç¤º
- **â° è‡ªåŠ¨åˆ‡æ¢**: æ™ºèƒ½å®šæ—¶åˆ‡æ¢ï¼Œæ”¯æŒæ‰‹åŠ¨æ§åˆ¶
- **ğŸ“± å“åº”å¼**: ç§»åŠ¨ç«¯16:9æ¯”ä¾‹ä¼˜åŒ–
- **ğŸ¨ è§†è§‰æ•ˆæœ**: å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»ï¼Œæ¯›ç»ç’ƒèƒŒæ™¯

#### è½®æ’­æŠ€æœ¯å®ç°
```css
/* è½®æ’­å®¹å™¨æ ·å¼ */
.carousel-container {
    position: relative;
    overflow: hidden;
    border-radius: 15px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.8);
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ– */
@media (max-width: 768px) {
    .carousel-slide {
        aspect-ratio: 16/9; /* ç§»åŠ¨ç«¯16:9æ¯”ä¾‹ */
        height: auto;
    }
}
```

### ğŸ” æ™ºèƒ½æœç´¢ç³»ç»Ÿ

#### æœç´¢åŠŸèƒ½
- **âš¡ å®æ—¶æœç´¢**: è¾“å…¥å³æœç´¢ï¼Œæ— éœ€ç­‰å¾…
- **ğŸ¯ æ¨¡ç³ŠåŒ¹é…**: æ”¯æŒæ ‡é¢˜ã€æè¿°æ¨¡ç³Šæœç´¢
- **ğŸ“Š ç»“æœæ’åº**: æ™ºèƒ½ç›¸å…³æ€§æ’åº
- **ğŸ’¡ æœç´¢å»ºè®®**: è‡ªåŠ¨è¡¥å…¨å’Œæœç´¢å»ºè®®

```javascript
// æœç´¢ç®—æ³•å®ç°
function searchMovies(query) {
    const searchTerm = query.toLowerCase().trim();
    return movies.filter(movie => {
        const titleMatch = movie.title.toLowerCase().includes(searchTerm);
        const descMatch = movie.description.toLowerCase().includes(searchTerm);
        return titleMatch || descMatch;
    }).sort((a, b) => {
        // æ ‡é¢˜åŒ¹é…ä¼˜å…ˆçº§æ›´é«˜
        const aTitle = a.title.toLowerCase().includes(searchTerm);
        const bTitle = b.title.toLowerCase().includes(searchTerm);
        if (aTitle && !bTitle) return -1;
        if (!aTitle && bTitle) return 1;
        return 0;
    });
}
```

### ğŸ›ï¸ ç®¡ç†åå°ç³»ç»Ÿ

#### ç°ä»£åŒ–ç®¡ç†ç•Œé¢
- **ğŸ¨ ç¾è§‚è®¾è®¡**: ç°ä»£åŒ–ç™½è‰²ä¸»é¢˜ï¼Œæ¸å˜èƒŒæ™¯
- **ğŸ“ å†…å®¹ç®¡ç†**: è§†é¢‘å¢åˆ æ”¹æŸ¥ï¼Œå‰§é›†ç®¡ç†
- **ğŸ“Š å®æ—¶é¢„è§ˆ**: æ“ä½œç»“æœå®æ—¶åé¦ˆ
- **ğŸ“± å“åº”å¼**: å®Œç¾é€‚é…å„ç§è®¾å¤‡

#### åŠ¨æ€æ•°æ®ç®¡ç†
```javascript
// æ•°æ®æŒä¹…åŒ–ç³»ç»Ÿ
class DataManager {
    constructor() {
        this.moviesFile = path.join(__dirname, 'movies_data.json');
        this.danmakuFile = path.join(__dirname, 'danmaku_data.json');
    }
    
    async saveMovies(movies) {
        const data = {
            movies: movies,
            lastUpdated: new Date().toISOString(),
            version: '1.0.0'
        };
        await fsPromises.writeFile(this.moviesFile, JSON.stringify(data, null, 2));
    }
    
    async loadMovies() {
        if (fs.existsSync(this.moviesFile)) {
            const data = await fsPromises.readFile(this.moviesFile, 'utf8');
            return JSON.parse(data).movies;
        }
        return [];
    }
}
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ğŸ“Š ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    A[ç”¨æˆ·æµè§ˆå™¨] --> B[Nginxåå‘ä»£ç†]
    B --> C[Express.jsæœåŠ¡å™¨]
    C --> D[é™æ€æ–‡ä»¶æœåŠ¡]
    C --> E[APIè·¯ç”±å±‚]
    C --> F[è§†é¢‘æµå¤„ç†]
    E --> G[ç”µå½±æ•°æ®ç®¡ç†]
    E --> H[å¼¹å¹•ç³»ç»Ÿ]
    E --> I[ç®¡ç†åå°]
    G --> J[movies_data.json]
    H --> K[danmaku_data.json]
    D --> L[è§†é¢‘æ–‡ä»¶å­˜å‚¨]
    D --> M[å›¾ç‰‡èµ„æºå­˜å‚¨]
```

### ğŸ› ï¸ æŠ€æœ¯æ ˆè¯¦è§£

#### åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | ç‰¹æ€§ |
|------|------|------|------|
| **Node.js** | 18.0+ | è¿è¡Œæ—¶ç¯å¢ƒ | é«˜æ€§èƒ½ã€äº‹ä»¶é©±åŠ¨ã€éé˜»å¡I/O |
| **Express.js** | 4.18+ | Webæ¡†æ¶ | è½»é‡çº§ã€ä¸­é—´ä»¶æ”¯æŒã€RESTful API |
| **CORS** | 2.8+ | è·¨åŸŸå¤„ç† | å®‰å…¨çš„è·¨åŸŸèµ„æºå…±äº« |
| **fs/promises** | å†…ç½® | æ–‡ä»¶æ“ä½œ | å¼‚æ­¥æ–‡ä»¶è¯»å†™ï¼Œæ•°æ®æŒä¹…åŒ– |
| **path** | å†…ç½® | è·¯å¾„å¤„ç† | è·¨å¹³å°è·¯å¾„æ“ä½œ |

#### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” | ç‰¹æ€§ |
|------|------|------|
| **HTML5** | é¡µé¢ç»“æ„ | è¯­ä¹‰åŒ–æ ‡ç­¾ã€è§†é¢‘æ”¯æŒã€PWAç‰¹æ€§ |
| **CSS3** | æ ·å¼è®¾è®¡ | Flexbox/Gridå¸ƒå±€ã€åŠ¨ç”»ã€å“åº”å¼ |
| **JavaScript ES6+** | äº¤äº’é€»è¾‘ | åŸç”ŸJSã€æ¨¡å—åŒ–ã€å¼‚æ­¥å¤„ç† |
| **Web APIs** | æµè§ˆå™¨åŠŸèƒ½ | Fetch APIã€DOMæ“ä½œã€äº‹ä»¶å¤„ç† |

### ğŸ—‚ï¸ é¡¹ç›®ç»“æ„è¯¦è§£

```
SMTFILM/
â”œâ”€â”€ ğŸ“ backend/                    # åç«¯æœåŠ¡ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ server.js               # ExpressæœåŠ¡å™¨ä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ package.json            # åç«¯ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ admin.html              # ç®¡ç†åå°é¡µé¢
â”‚   â”œâ”€â”€ ğŸ“„ movies_data.json        # ç”µå½±æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ ğŸ“„ danmaku_data.json       # å¼¹å¹•æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ ğŸ“ images/                 # æµ·æŠ¥å›¾ç‰‡å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ ğŸ–¼ï¸ na.jpg              # ç”µå½±æµ·æŠ¥
â”‚   â”‚   â”œâ”€â”€ ğŸ–¼ï¸ na-hx.jpg           # è½®æ’­æµ·æŠ¥
â”‚   â”‚   â””â”€â”€ ğŸ–¼ï¸ ...                 # å…¶ä»–å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ ğŸ“ videos/                 # è§†é¢‘æ–‡ä»¶å­˜å‚¨
â”‚       â”œâ”€â”€ ğŸ¬ na-1.mp4            # è§†é¢‘æ–‡ä»¶
â”‚       â””â”€â”€ ğŸ¬ ...                 # å…¶ä»–è§†é¢‘æ–‡ä»¶
â”œâ”€â”€ ğŸ“ combined/                   # å‰ç«¯æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ smtfilm.html            # ä¸»é¡µé¢æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ download.html           # ä¸‹è½½é¡µé¢
â”‚   â””â”€â”€ ğŸ“ å±•ç¤º/                   # å±•ç¤ºç›¸å…³æ–‡ä»¶
â”œâ”€â”€ ğŸ“ smtfilm-server/             # ç®€åŒ–æœåŠ¡å™¨
â””â”€â”€ ğŸ“„ README.md                   # é¡¹ç›®æ–‡æ¡£
```

### ğŸ”§ æ ¸å¿ƒæ¨¡å—è¯¦è§£

#### 1. è§†é¢‘æµå¤„ç†æ¨¡å—

```javascript
// è§†é¢‘æµå¤„ç†æ ¸å¿ƒé€»è¾‘
class VideoStreamHandler {
    constructor() {
        this.videoPath = path.join(__dirname, 'videos');
    }
    
    async handleVideoRequest(req, res) {
        const videoName = req.params.videoName;
        const videoPath = path.join(this.videoPath, videoName);
        
        // å®‰å…¨æ£€æŸ¥
        if (!this.isValidVideoFile(videoPath)) {
            return res.status(404).send('Video not found');
        }
        
        const stat = await fs.promises.stat(videoPath);
        const fileSize = stat.size;
        const range = req.headers.range;
        
        if (range) {
            // å¤„ç†Rangeè¯·æ±‚ï¼Œæ”¯æŒè§†é¢‘æ‹–æ‹½
            return this.handleRangeRequest(req, res, videoPath, fileSize);
        } else {
            // å¤„ç†å®Œæ•´è§†é¢‘è¯·æ±‚
            return this.handleFullVideoRequest(res, videoPath, fileSize);
        }
    }
    
    handleRangeRequest(req, res, videoPath, fileSize) {
        const parts = req.headers.range.replace(/bytes=/, "").split("-");
        const start = parseInt(parts[0], 10);
        const end = parts[1] ? parseInt(parts[1], 10) : fileSize - 1;
        const chunksize = (end - start) + 1;
        
        const file = fs.createReadStream(videoPath, { start, end });
        
        res.writeHead(206, {
            'Content-Range': `bytes ${start}-${end}/${fileSize}`,
            'Accept-Ranges': 'bytes',
            'Content-Length': chunksize,
            'Content-Type': 'video/mp4',
            'Cache-Control': 'public, max-age=31536000'
        });
        
        file.pipe(res);
    }
}
```

#### 2. å¼¹å¹•ç³»ç»Ÿæ¨¡å—

```javascript
// å¼¹å¹•ç³»ç»Ÿæ ¸å¿ƒé€»è¾‘
class DanmakuSystem {
    constructor() {
        this.danmakuData = {};
        this.dataFile = path.join(__dirname, 'danmaku_data.json');
        this.loadData();
    }
    
    // è·å–å¼¹å¹•æ•°æ®
    getDanmaku(movieId, episodeId) {
        const key = `${movieId}-${episodeId}`;
        return this.danmakuData[key] || [];
    }
    
    // æ·»åŠ å¼¹å¹•
    addDanmaku(movieId, episodeId, danmakuData) {
        const key = `${movieId}-${episodeId}`;
        
        if (!this.danmakuData[key]) {
            this.danmakuData[key] = [];
        }
        
        const danmaku = {
            id: this.generateId(),
            time: parseFloat(danmakuData.time),
            text: this.sanitizeText(danmakuData.text),
            color: danmakuData.color || '#ffffff',
            fontSize: danmakuData.fontSize || 16,
            timestamp: Date.now(),
            ip: this.hashIP(danmakuData.ip)
        };
        
        this.danmakuData[key].push(danmaku);
        this.saveData();
        
        return danmaku;
    }
    
    // æ–‡æœ¬å®‰å…¨å¤„ç†
    sanitizeText(text) {
        return text.replace(/<[^>]*>/g, '').substring(0, 100);
    }
    
    // IPåœ°å€å“ˆå¸ŒåŒ–ï¼ˆéšç§ä¿æŠ¤ï¼‰
    hashIP(ip) {
        return require('crypto').createHash('md5').update(ip).digest('hex').substring(0, 8);
    }
}
```

#### 3. æ•°æ®ç®¡ç†æ¨¡å—

```javascript
// æ•°æ®ç®¡ç†æ ¸å¿ƒé€»è¾‘
class DataManager {
    constructor() {
        this.moviesFile = path.join(__dirname, 'movies_data.json');
        this.movies = [];
        this.loadMovies();
    }
    
    async loadMovies() {
        try {
            if (fs.existsSync(this.moviesFile)) {
                const data = await fs.promises.readFile(this.moviesFile, 'utf8');
                const moviesData = JSON.parse(data);
                this.movies = moviesData.movies || [];
                console.log(`å·²åŠ è½½ ${this.movies.length} éƒ¨ç”µå½±`);
            }
        } catch (error) {
            console.error('åŠ è½½ç”µå½±æ•°æ®å¤±è´¥:', error);
        }
    }
    
    async saveMovies() {
        try {
            const data = {
                movies: this.movies,
                lastUpdated: new Date().toISOString(),
                version: '1.0.0'
            };
            await fs.promises.writeFile(this.moviesFile, JSON.stringify(data, null, 2));
            console.log('ç”µå½±æ•°æ®ä¿å­˜æˆåŠŸ');
        } catch (error) {
            console.error('ä¿å­˜ç”µå½±æ•°æ®å¤±è´¥:', error);
        }
    }
    
    // CRUDæ“ä½œ
    addMovie(movieData) {
        const newMovie = {
            id: this.generateId(),
            ...movieData,
            createdAt: new Date().toISOString()
        };
        this.movies.push(newMovie);
        this.saveMovies();
        return newMovie;
    }
    
    updateMovie(id, movieData) {
        const index = this.movies.findIndex(m => m.id === parseInt(id));
        if (index !== -1) {
            this.movies[index] = {
                ...this.movies[index],
                ...movieData,
                updatedAt: new Date().toISOString()
            };
            this.saveMovies();
            return this.movies[index];
        }
        return null;
    }
    
    deleteMovie(id) {
        const index = this.movies.findIndex(m => m.id === parseInt(id));
        if (index !== -1) {
            const deleted = this.movies.splice(index, 1)[0];
            this.saveMovies();
            return deleted;
        }
        return null;
    }
}
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Node.js**: 18.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+, Ubuntu 18.04+
- **æµè§ˆå™¨**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

### âš¡ ä¸€é”®å®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/smtfilm.git
cd smtfilm

# 2. å®‰è£…ä¾èµ–
cd backend
npm install

# 3. å¯åŠ¨æœåŠ¡
npm run dev

# 4. è®¿é—®åº”ç”¨
# æµè§ˆå™¨æ‰“å¼€: http://localhost:3000
```

### ğŸ”§ è¯¦ç»†å®‰è£…æ­¥éª¤

#### 1. é¡¹ç›®å…‹éš†ä¸ä¾èµ–å®‰è£…

```bash
# å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°
git clone https://github.com/your-username/smtfilm.git
cd smtfilm

# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£…åç«¯ä¾èµ–
npm install

# æ£€æŸ¥ä¾èµ–æ˜¯å¦å®‰è£…æˆåŠŸ
npm list
```

#### 2. ç¯å¢ƒé…ç½®

```bash
# åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
# PORT=3000
# NODE_ENV=development
# VIDEO_PATH=./videos
# IMAGE_PATH=./images
```

#### 3. å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆæ¨èï¼‰
npm run dev

# æˆ–è€…ç”Ÿäº§æ¨¡å¼å¯åŠ¨
npm start

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
curl http://localhost:3000/api/movies
```

#### 4. éªŒè¯å®‰è£…

- **ä¸»é¡µé¢**: http://localhost:3000
- **ç®¡ç†åå°**: http://localhost:3000/admin
- **APIæ¥å£**: http://localhost:3000/api/movies

---

## ğŸ“– API æ–‡æ¡£

### ğŸ¬ ç”µå½±ç›¸å…³æ¥å£

#### è·å–ç”µå½±åˆ—è¡¨
```http
GET /api/movies
```

**å“åº”ç¤ºä¾‹**:
```json
[
    {
        "id": 1,
        "title": "é€†çˆ±",
        "poster": "/images/na.jpg",
        "description": "ç”µå½±æè¿°...",
        "episodes": [
            {
                "id": 1,
                "title": "ç¬¬ä¸€é›†",
                "video": "/videos/na-1.mp4"
            }
        ]
    }
]
```

#### è·å–ç”µå½±è¯¦æƒ…
```http
GET /api/movies/:id
```

**å‚æ•°**:
- `id` (number): ç”µå½±ID

#### è·å–æ¨èå†…å®¹
```http
GET /api/featured
```

### ğŸ¥ è§†é¢‘æµæ¥å£

#### è§†é¢‘æµæ’­æ”¾
```http
GET /videos/:videoName
```

**ç‰¹æ€§**:
- æ”¯æŒHTTP Rangeè¯·æ±‚
- æ–­ç‚¹ç»­ä¼ 
- è§†é¢‘æ‹–æ‹½å®šä½
- ç¼“å­˜ä¼˜åŒ–

**è¯·æ±‚å¤´**:
```http
Range: bytes=0-1023
Accept: video/mp4
```

**å“åº”å¤´**:
```http
Content-Range: bytes 0-1023/2048
Accept-Ranges: bytes
Content-Type: video/mp4
Cache-Control: public, max-age=31536000
```

### ğŸ’¬ å¼¹å¹•ç³»ç»Ÿæ¥å£

#### è·å–å¼¹å¹•
```http
GET /api/danmaku/:movieId/:episodeId
```

**å“åº”ç¤ºä¾‹**:
```json
[
    {
        "id": "danmaku_001",
        "time": 120.5,
        "text": "å¼¹å¹•å†…å®¹",
        "color": "#ffffff",
        "fontSize": 16,
        "timestamp": 1640995200000
    }
]
```

#### å‘é€å¼¹å¹•
```http
POST /api/danmaku/:movieId/:episodeId
```

**è¯·æ±‚ä½“**:
```json
{
    "time": 120.5,
    "text": "å¼¹å¹•å†…å®¹",
    "color": "#ffffff",
    "fontSize": 16
}
```

### ğŸ› ï¸ ç®¡ç†åå°æ¥å£

#### æ·»åŠ ç”µå½±
```http
POST /api/admin/movies
```

#### æ›´æ–°ç”µå½±
```http
PUT /api/admin/movies/:id
```

#### åˆ é™¤ç”µå½±
```http
DELETE /api/admin/movies/:id
```

---

## ğŸ“± å“åº”å¼è®¾è®¡è¯¦è§£

### ğŸ¨ è®¾è®¡åŸåˆ™

#### ç§»åŠ¨ä¼˜å…ˆç­–ç•¥
```css
/* åŸºç¡€æ ·å¼ï¼ˆç§»åŠ¨ç«¯ï¼‰ */
.movie-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    padding: 20px;
}

/* å¹³æ¿ç«¯é€‚é… */
@media (min-width: 768px) {
    .movie-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        padding: 30px;
    }
}

/* æ¡Œé¢ç«¯é€‚é… */
@media (min-width: 1200px) {
    .movie-grid {
        grid-template-columns: repeat(5, 1fr);
        gap: 25px;
        padding: 50px;
    }
}
```

#### æ–­ç‚¹ç³»ç»Ÿ

| è®¾å¤‡ç±»å‹ | å±å¹•å®½åº¦ | ç½‘æ ¼åˆ—æ•° | ç‰¹æ®Šä¼˜åŒ– |
|----------|----------|----------|----------|
| æ‰‹æœº | < 768px | 2åˆ— | 16:9è½®æ’­ï¼Œå¤§æŒ‰é’® |
| å¹³æ¿ | 768px - 1199px | 3åˆ— | è§¦æ‘¸ä¼˜åŒ– |
| æ¡Œé¢ | â‰¥ 1200px | 5åˆ— | é¼ æ ‡æ‚¬åœæ•ˆæœ |

### ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–

#### iOS Safari é€‚é…
```css
/* iOS Safari å…¨å±ä¼˜åŒ– */
body {
    /* å®‰å…¨åŒºåŸŸé€‚é… */
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    
    /* é˜²æ­¢ç¼©æ”¾ */
    -webkit-text-size-adjust: 100%;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    
    /* è§¦æ‘¸ä¼˜åŒ– */
    touch-action: manipulation;
}

/* è§†å£é«˜åº¦ä¿®å¤ */
:root {
    --vh: 1vh;
}

html {
    height: calc(var(--vh, 1vh) * 100);
}
```

#### è§¦æ‘¸äº¤äº’ä¼˜åŒ–
```javascript
// è§¦æ‘¸äº‹ä»¶å¤„ç†
class TouchHandler {
    constructor(element) {
        this.element = element;
        this.startX = 0;
        this.startY = 0;
        this.threshold = 50;
        
        this.bindEvents();
    }
    
    bindEvents() {
        this.element.addEventListener('touchstart', this.handleTouchStart.bind(this));
        this.element.addEventListener('touchmove', this.handleTouchMove.bind(this));
        this.element.addEventListener('touchend', this.handleTouchEnd.bind(this));
    }
    
    handleTouchStart(e) {
        this.startX = e.touches[0].clientX;
        this.startY = e.touches[0].clientY;
    }
    
    handleTouchMove(e) {
        // é˜²æ­¢é¡µé¢æ»šåŠ¨
        if (this.isVideoArea(e.target)) {
            e.preventDefault();
        }
    }
    
    handleTouchEnd(e) {
        const deltaX = e.changedTouches[0].clientX - this.startX;
        const deltaY = e.changedTouches[0].clientY - this.startY;
        
        // æ‰‹åŠ¿è¯†åˆ«
        if (Math.abs(deltaX) > this.threshold) {
            if (deltaX > 0) {
                this.onSwipeRight();
            } else {
                this.onSwipeLeft();
            }
        }
    }
}
```

---

## ğŸ¨ UI/UX è®¾è®¡è¯¦è§£

### ğŸŒˆ è§†è§‰è®¾è®¡ç³»ç»Ÿ

#### è‰²å½©æ–¹æ¡ˆ
```css
:root {
    /* ä¸»è‰²è°ƒ */
    --primary-red: #e50914;
    --primary-dark: #141414;
    
    /* èƒŒæ™¯è‰² */
    --bg-primary: #141414;
    --bg-secondary: #1a1a1a;
    --bg-tertiary: #222222;
    
    /* æ–‡å­—è‰² */
    --text-primary: #ffffff;
    --text-secondary: #b3b3b3;
    --text-muted: #808080;
    
    /* çŠ¶æ€è‰² */
    --success: #46d369;
    --warning: #fb8c00;
    --error: #f44336;
    
    /* é€æ˜åº¦ */
    --overlay-light: rgba(0, 0, 0, 0.3);
    --overlay-medium: rgba(0, 0, 0, 0.6);
    --overlay-heavy: rgba(0, 0, 0, 0.8);
}
```

#### å­—ä½“ç³»ç»Ÿ
```css
/* å­—ä½“å±‚çº§ */
.text-hero {
    font-size: clamp(2rem, 5vw, 4rem);
    font-weight: 700;
    line-height: 1.1;
}

.text-title {
    font-size: clamp(1.5rem, 3vw, 2.5rem);
    font-weight: 600;
    line-height: 1.2;
}

.text-subtitle {
    font-size: clamp(1rem, 2vw, 1.25rem);
    font-weight: 500;
    line-height: 1.4;
}

.text-body {
    font-size: clamp(0.875rem, 1.5vw, 1rem);
    font-weight: 400;
    line-height: 1.6;
}
```

### âœ¨ åŠ¨ç”»ç³»ç»Ÿ

#### è¿‡æ¸¡åŠ¨ç”»
```css
/* å…¨å±€è¿‡æ¸¡ */
* {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* æ‚¬åœæ•ˆæœ */
.movie-card {
    transform: scale(1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.movie-card:hover {
    transform: scale(1.05);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8);
}

/* åŠ è½½åŠ¨ç”» */
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.loading {
    animation: pulse 2s infinite;
}
```

#### é¡µé¢è½¬åœº
```javascript
// é¡µé¢è½¬åœºåŠ¨ç”»
class PageTransition {
    static fadeIn(element, duration = 300) {
        element.style.opacity = '0';
        element.style.transform = 'translateY(20px)';
        
        requestAnimationFrame(() => {
            element.style.transition = `opacity ${duration}ms ease, transform ${duration}ms ease`;
            element.style.opacity = '1';
            element.style.transform = 'translateY(0)';
        });
    }
    
    static slideIn(element, direction = 'left', duration = 300) {
        const translateX = direction === 'left' ? '-100%' : '100%';
        
        element.style.transform = `translateX(${translateX})`;
        
        requestAnimationFrame(() => {
            element.style.transition = `transform ${duration}ms ease`;
            element.style.transform = 'translateX(0)';
        });
    }
}
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–è¯¦è§£

### ğŸš€ å‰ç«¯æ€§èƒ½ä¼˜åŒ–

#### å›¾ç‰‡æ‡’åŠ è½½
```javascript
// å›¾ç‰‡æ‡’åŠ è½½å®ç°
class LazyImageLoader {
    constructor() {
        this.imageObserver = new IntersectionObserver(
            this.handleIntersection.bind(this),
            { threshold: 0.1 }
        );
        
        this.init();
    }
    
    init() {
        const lazyImages = document.querySelectorAll('img[data-src]');
        lazyImages.forEach(img => this.imageObserver.observe(img));
    }
    
    handleIntersection(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.classList.add('loaded');
                this.imageObserver.unobserve(img);
            }
        });
    }
}
```

#### è§†é¢‘é¢„åŠ è½½ç­–ç•¥
```javascript
// æ™ºèƒ½è§†é¢‘é¢„åŠ è½½
class VideoPreloader {
    constructor() {
        this.preloadQueue = [];
        this.maxConcurrent = 2;
        this.currentLoading = 0;
    }
    
    preloadVideo(videoUrl, priority = 'normal') {
        const preloadItem = {
            url: videoUrl,
            priority: priority,
            timestamp: Date.now()
        };
        
        if (priority === 'high') {
            this.preloadQueue.unshift(preloadItem);
        } else {
            this.preloadQueue.push(preloadItem);
        }
        
        this.processQueue();
    }
    
    processQueue() {
        if (this.currentLoading >= this.maxConcurrent || this.preloadQueue.length === 0) {
            return;
        }
        
        const item = this.preloadQueue.shift();
        this.currentLoading++;
        
        const video = document.createElement('video');
        video.preload = 'metadata';
        video.src = item.url;
        
        video.addEventListener('loadedmetadata', () => {
            this.currentLoading--;
            this.processQueue();
        });
        
        video.addEventListener('error', () => {
            this.currentLoading--;
            this.processQueue();
        });
    }
}
```

### ğŸ”§ åç«¯æ€§èƒ½ä¼˜åŒ–

#### ç¼“å­˜ç­–ç•¥
```javascript
// å†…å­˜ç¼“å­˜å®ç°
class MemoryCache {
    constructor(maxSize = 100, ttl = 3600000) { // 1å°æ—¶TTL
        this.cache = new Map();
        this.maxSize = maxSize;
        this.ttl = ttl;
    }
    
    set(key, value) {
        // æ¸…ç†è¿‡æœŸç¼“å­˜
        this.cleanup();
        
        // å¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ é™¤æœ€æ—§çš„é¡¹
        if (this.cache.size >= this.maxSize) {
            const firstKey = this.cache.keys().next().value;
            this.cache.delete(firstKey);
        }
        
        this.cache.set(key, {
            value: value,
            timestamp: Date.now()
        });
    }
    
    get(key) {
        const item = this.cache.get(key);
        
        if (!item) return null;
        
        // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
        if (Date.now() - item.timestamp > this.ttl) {
            this.cache.delete(key);
            return null;
        }
        
        return item.value;
    }
    
    cleanup() {
        const now = Date.now();
        for (const [key, item] of this.cache.entries()) {
            if (now - item.timestamp > this.ttl) {
                this.cache.delete(key);
            }
        }
    }
}
```

#### æ•°æ®åº“ä¼˜åŒ–
```javascript
// æ•°æ®æŸ¥è¯¢ä¼˜åŒ–
class OptimizedDataManager {
    constructor() {
        this.cache = new MemoryCache();
        this.indexedMovies = new Map();
        this.buildIndexes();
    }
    
    buildIndexes() {
        // æ„å»ºç´¢å¼•ä»¥åŠ é€ŸæŸ¥è¯¢
        this.movies.forEach(movie => {
            this.indexedMovies.set(movie.id, movie);
        });
    }
    
    getMovieById(id) {
        const cacheKey = `movie_${id}`;
        let movie = this.cache.get(cacheKey);
        
        if (!movie) {
            movie = this.indexedMovies.get(parseInt(id));
            if (movie) {
                this.cache.set(cacheKey, movie);
            }
        }
        
        return movie;
    }
    
    searchMovies(query) {
        const cacheKey = `search_${query.toLowerCase()}`;
        let results = this.cache.get(cacheKey);
        
        if (!results) {
            results = this.performSearch(query);
            this.cache.set(cacheKey, results);
        }
        
        return results;
    }
}
```

---

## ğŸ”’ å®‰å…¨æ€§è¯¦è§£

### ğŸ›¡ï¸ å®‰å…¨æªæ–½

#### è¾“å…¥éªŒè¯ä¸æ¸…ç†
```javascript
// è¾“å…¥éªŒè¯ä¸­é—´ä»¶
class InputValidator {
    static validateDanmaku(req, res, next) {
        const { time, text, color, fontSize } = req.body;
        
        // æ—¶é—´éªŒè¯
        if (typeof time !== 'number' || time < 0 || time > 86400) {
            return res.status(400).json({ error: 'æ— æ•ˆçš„æ—¶é—´å‚æ•°' });
        }
        
        // æ–‡æœ¬éªŒè¯
        if (typeof text !== 'string' || text.length === 0 || text.length > 100) {
            return res.status(400).json({ error: 'å¼¹å¹•å†…å®¹é•¿åº¦å¿…é¡»åœ¨1-100å­—ç¬¦ä¹‹é—´' });
        }
        
        // HTMLæ ‡ç­¾æ¸…ç†
        req.body.text = text.replace(/<[^>]*>/g, '');
        
        // é¢œè‰²éªŒè¯
        if (color && !/^#[0-9A-Fa-f]{6}$/.test(color)) {
            return res.status(400).json({ error: 'æ— æ•ˆçš„é¢œè‰²æ ¼å¼' });
        }
        
        // å­—ä½“å¤§å°éªŒè¯
        if (fontSize && (fontSize < 12 || fontSize > 24)) {
            return res.status(400).json({ error: 'å­—ä½“å¤§å°å¿…é¡»åœ¨12-24ä¹‹é—´' });
        }
        
        next();
    }
    
    static validateMovieData(req, res, next) {
        const { title, description, episodes } = req.body;
        
        // æ ‡é¢˜éªŒè¯
        if (!title || typeof title !== 'string' || title.length > 100) {
            return res.status(400).json({ error: 'æ ‡é¢˜ä¸èƒ½ä¸ºç©ºä¸”é•¿åº¦ä¸èƒ½è¶…è¿‡100å­—ç¬¦' });
        }
        
        // æè¿°éªŒè¯
        if (description && description.length > 1000) {
            return res.status(400).json({ error: 'æè¿°é•¿åº¦ä¸èƒ½è¶…è¿‡1000å­—ç¬¦' });
        }
        
        // å‰§é›†éªŒè¯
        if (episodes && !Array.isArray(episodes)) {
            return res.status(400).json({ error: 'å‰§é›†æ•°æ®æ ¼å¼é”™è¯¯' });
        }
        
        next();
    }
}
```

#### æ–‡ä»¶å®‰å…¨
```javascript
// æ–‡ä»¶å®‰å…¨æ£€æŸ¥
class FileSecurity {
    static isValidVideoFile(filePath) {
        // è·¯å¾„éå†æ”»å‡»é˜²æŠ¤
        const normalizedPath = path.normalize(filePath);
        const videoDir = path.join(__dirname, 'videos');
        
        if (!normalizedPath.startsWith(videoDir)) {
            return false;
        }
        
        // æ–‡ä»¶æ‰©å±•åæ£€æŸ¥
        const allowedExtensions = ['.mp4', '.webm', '.ogg'];
        const ext = path.extname(normalizedPath).toLowerCase();
        
        return allowedExtensions.includes(ext);
    }
    
    static isValidImageFile(filePath) {
        const normalizedPath = path.normalize(filePath);
        const imageDir = path.join(__dirname, 'images');
        
        if (!normalizedPath.startsWith(imageDir)) {
            return false;
        }
        
        const allowedExtensions = ['.jpg', '.jpeg', '.png', '.webp'];
        const ext = path.extname(normalizedPath).toLowerCase();
        
        return allowedExtensions.includes(ext);
    }
}
```

#### é€Ÿç‡é™åˆ¶
```javascript
// é€Ÿç‡é™åˆ¶ä¸­é—´ä»¶
class RateLimiter {
    constructor(windowMs = 60000, maxRequests = 100) {
        this.windowMs = windowMs;
        this.maxRequests = maxRequests;
        this.requests = new Map();
        
        // å®šæœŸæ¸…ç†è¿‡æœŸè®°å½•
        setInterval(() => this.cleanup(), this.windowMs);
    }
    
    middleware() {
        return (req, res, next) => {
            const clientIP = this.getClientIP(req);
            const now = Date.now();
            const windowStart = now - this.windowMs;
            
            // è·å–å®¢æˆ·ç«¯è¯·æ±‚è®°å½•
            let clientRequests = this.requests.get(clientIP) || [];
            
            // è¿‡æ»¤æ‰è¿‡æœŸçš„è¯·æ±‚
            clientRequests = clientRequests.filter(timestamp => timestamp > windowStart);
            
            // æ£€æŸ¥æ˜¯å¦è¶…è¿‡é™åˆ¶
            if (clientRequests.length >= this.maxRequests) {
                return res.status(429).json({
                    error: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•',
                    retryAfter: Math.ceil(this.windowMs / 1000)
                });
            }
            
            // è®°å½•å½“å‰è¯·æ±‚
            clientRequests.push(now);
            this.requests.set(clientIP, clientRequests);
            
            next();
        };
    }
    
    getClientIP(req) {
        return req.headers['x-forwarded-for'] || 
               req.headers['x-real-ip'] || 
               req.connection.remoteAddress || 
               req.ip;
    }
    
    cleanup() {
        const now = Date.now();
        const windowStart = now - this.windowMs;
        
        for (const [ip, requests] of this.requests.entries()) {
            const validRequests = requests.filter(timestamp => timestamp > windowStart);
            if (validRequests.length === 0) {
                this.requests.delete(ip);
            } else {
                this.requests.set(ip, validRequests);
            }
        }
    }
}
```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

#### æ¨èå¼€å‘å·¥å…·

| å·¥å…· | ç”¨é€” | æ¨èç‰ˆæœ¬ |
|------|------|----------|
| **VS Code** | ä»£ç ç¼–è¾‘å™¨ | æœ€æ–°ç‰ˆ |
| **Node.js** | è¿è¡Œç¯å¢ƒ | 18.0+ |
| **npm** | åŒ…ç®¡ç†å™¨ | 8.0+ |
| **Git** | ç‰ˆæœ¬æ§åˆ¶ | 2.30+ |
| **Postman** | APIæµ‹è¯• | æœ€æ–°ç‰ˆ |

#### VS Code æ‰©å±•æ¨è

```json
{
    "recommendations": [
        "ms-vscode.vscode-json",
        "bradlc.vscode-tailwindcss",
        "esbenp.prettier-vscode",
        "ms-vscode.vscode-eslint",
        "formulahendry.auto-rename-tag",
        "christian-kohler.path-intellisense",
        "ms-vscode.vscode-typescript-next"
    ]
}
```

#### å¼€å‘è„šæœ¬

```json
{
    "scripts": {
        "dev": "nodemon server.js",
        "start": "node server.js",
        "test": "jest",
        "lint": "eslint .",
        "format": "prettier --write .",
        "build": "npm run lint && npm run test",
        "deploy": "npm run build && pm2 restart smtfilm"
    }
}
```

### ğŸ“ ä»£ç è§„èŒƒ

#### JavaScript ä»£ç è§„èŒƒ

```javascript
// ä½¿ç”¨ ES6+ è¯­æ³•
const express = require('express');
const { promisify } = require('util');

// ä½¿ç”¨ async/await è€Œä¸æ˜¯å›è°ƒ
async function loadMovieData() {
    try {
        const data = await fs.promises.readFile(filePath, 'utf8');
        return JSON.parse(data);
    } catch (error) {
        console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
        return null;
    }
}

// ä½¿ç”¨è§£æ„èµ‹å€¼
const { title, description, episodes } = movieData;

// ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²
const message = `ç”µå½± "${title}" æ·»åŠ æˆåŠŸ`;

// ä½¿ç”¨ç®­å¤´å‡½æ•°
const filterMovies = (movies, query) => {
    return movies.filter(movie => 
        movie.title.toLowerCase().includes(query.toLowerCase())
    );
};
```

#### CSS ä»£ç è§„èŒƒ

```css
/* ä½¿ç”¨ BEM å‘½åè§„èŒƒ */
.movie-card {
    /* å—çº§å…ƒç´  */
}

.movie-card__title {
    /* å…ƒç´  */
}

.movie-card--featured {
    /* ä¿®é¥°ç¬¦ */
}

/* ä½¿ç”¨ CSS è‡ªå®šä¹‰å±æ€§ */
:root {
    --primary-color: #e50914;
    --secondary-color: #141414;
    --border-radius: 8px;
}

.button {
    background-color: var(--primary-color);
    border-radius: var(--border-radius);
}

/* ç§»åŠ¨ä¼˜å…ˆçš„åª’ä½“æŸ¥è¯¢ */
.container {
    padding: 1rem;
}

@media (min-width: 768px) {
    .container {
        padding: 2rem;
    }
}
```

### ğŸ§ª æµ‹è¯•ç­–ç•¥

#### å•å…ƒæµ‹è¯•

```javascript
// tests/danmaku.test.js
const DanmakuSystem = require('../src/DanmakuSystem');

describe('å¼¹å¹•ç³»ç»Ÿæµ‹è¯•', () => {
    let danmakuSystem;
    
    beforeEach(() => {
        danmakuSystem = new DanmakuSystem();
    });
    
    test('åº”è¯¥èƒ½å¤Ÿæ·»åŠ å¼¹å¹•', () => {
        const danmaku = {
            time: 120.5,
            text: 'æµ‹è¯•å¼¹å¹•',
            color: '#ffffff',
            fontSize: 16
        };
        
        const result = danmakuSystem.addDanmaku(1, 1, danmaku);
        
        expect(result).toHaveProperty('id');
        expect(result.text).toBe('æµ‹è¯•å¼¹å¹•');
        expect(result.time).toBe(120.5);
    });
    
    test('åº”è¯¥èƒ½å¤Ÿè·å–å¼¹å¹•åˆ—è¡¨', () => {
        // æ·»åŠ æµ‹è¯•å¼¹å¹•
        danmakuSystem.addDanmaku(1, 1, {
            time: 60,
            text: 'å¼¹å¹•1',
            color: '#ffffff'
        });
        
        const danmakuList = danmakuSystem.getDanmaku(1, 1);
        
        expect(danmakuList).toHaveLength(1);
        expect(danmakuList[0].text).toBe('å¼¹å¹•1');
    });
    
    test('åº”è¯¥è¿‡æ»¤æ¶æ„HTMLæ ‡ç­¾', () => {
        const maliciousDanmaku = {
            time: 30,
            text: '<script>alert("xss")</script>æ­£å¸¸æ–‡æœ¬',
            color: '#ffffff'
        };
        
        const result = danmakuSystem.addDanmaku(1, 1, maliciousDanmaku);
        
        expect(result.text).toBe('æ­£å¸¸æ–‡æœ¬');
        expect(result.text).not.toContain('<script>');
    });
});
```

#### API æµ‹è¯•

```javascript
// tests/api.test.js
const request = require('supertest');
const app = require('../server');

describe('API æ¥å£æµ‹è¯•', () => {
    test('GET /api/movies åº”è¯¥è¿”å›ç”µå½±åˆ—è¡¨', async () => {
        const response = await request(app)
            .get('/api/movies')
            .expect(200);
        
        expect(Array.isArray(response.body)).toBe(true);
        expect(response.body.length).toBeGreaterThan(0);
    });
    
    test('GET /api/movies/:id åº”è¯¥è¿”å›æŒ‡å®šç”µå½±', async () => {
        const response = await request(app)
            .get('/api/movies/1')
            .expect(200);
        
        expect(response.body).toHaveProperty('id', 1);
        expect(response.body).toHaveProperty('title');
        expect(response.body).toHaveProperty('episodes');
    });
    
    test('POST /api/danmaku/:movieId/:episodeId åº”è¯¥æ·»åŠ å¼¹å¹•', async () => {
        const danmaku = {
            time: 120,
            text: 'æµ‹è¯•å¼¹å¹•',
            color: '#ffffff',
            fontSize: 16
        };
        
        const response = await request(app)
            .post('/api/danmaku/1/1')
            .send(danmaku)
            .expect(200);
        
        expect(response.body).toHaveProperty('id');
        expect(response.body.text).toBe('æµ‹è¯•å¼¹å¹•');
    });
});
```

### ğŸš€ éƒ¨ç½²æŒ‡å—

#### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# 1. æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡
sudo apt update
sudo apt install nodejs npm nginx pm2 -y

# 2. å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/smtfilm.git
cd smtfilm/backend

# 3. å®‰è£…ä¾èµ–
npm ci --production

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
nano .env

# 5. ä½¿ç”¨ PM2 å¯åŠ¨åº”ç”¨
pm2 start ecosystem.config.js

# 6. é…ç½® Nginx åå‘ä»£ç†
sudo nano /etc/nginx/sites-available/smtfilm
```

#### Nginx é…ç½®

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    # é‡å®šå‘åˆ° HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    # SSL è¯ä¹¦é…ç½®
    ssl_certificate /path/to/certificate.crt;
    ssl_certificate_key /path/to/private.key;
    
    # å®‰å…¨å¤´
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    
    # é™æ€æ–‡ä»¶ç¼“å­˜
    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # è§†é¢‘æ–‡ä»¶ç‰¹æ®Šå¤„ç†
    location /videos/ {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        
        # æ”¯æŒå¤§æ–‡ä»¶ä¼ è¾“
        proxy_max_temp_file_size 0;
        proxy_buffering off;
    }
    
    # API ä»£ç†
    location /api/ {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # ä¸»åº”ç”¨ä»£ç†
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### PM2 é…ç½®

```javascript
// ecosystem.config.js
module.exports = {
    apps: [{
        name: 'smtfilm',
        script: 'server.js',
        instances: 'max',
        exec_mode: 'cluster',
        env: {
            NODE_ENV: 'production',
            PORT: 3000
        },
        error_file: './logs/err.log',
        out_file: './logs/out.log',
        log_file: './logs/combined.log',
        time: true,
        max_memory_restart: '1G',
        node_args: '--max-old-space-size=1024'
    }]
};
```

---

## ğŸ“Š ç›‘æ§ä¸ç»´æŠ¤

### ğŸ“ˆ æ€§èƒ½ç›‘æ§

#### ç³»ç»Ÿç›‘æ§

```javascript
// æ€§èƒ½ç›‘æ§ä¸­é—´ä»¶
class PerformanceMonitor {
    constructor() {
        this.metrics = {
            requests: 0,
            errors: 0,
            responseTime: [],
            memoryUsage: [],
            cpuUsage: []
        };
        
        // å®šæœŸæ”¶é›†ç³»ç»ŸæŒ‡æ ‡
        setInterval(() => this.collectSystemMetrics(), 60000);
    }
    
    middleware() {
        return (req, res, next) => {
            const startTime = Date.now();
            
            res.on('finish', () => {
                const responseTime = Date.now() - startTime;
                this.recordRequest(req, res, responseTime) {
        this.metrics.requests++;
        this.metrics.responseTime.push(responseTime);
        
        if (res.statusCode >= 400) {
            this.metrics.errors++;
        }
        
        // ä¿æŒæœ€è¿‘1000æ¡è®°å½•
        if (this.metrics.responseTime.length > 1000) {
            this.metrics.responseTime.shift();
        }
    }
    
    collectSystemMetrics() {
        const memUsage = process.memoryUsage();
        this.metrics.memoryUsage.push({
            timestamp: Date.now(),
            heapUsed: memUsage.heapUsed,
            heapTotal: memUsage.heapTotal,
            external: memUsage.external
        });
        
        // ä¿æŒæœ€è¿‘100æ¡è®°å½•
        if (this.metrics.memoryUsage.length > 100) {
            this.metrics.memoryUsage.shift();
        }
    }
    
    getMetrics() {
        const avgResponseTime = this.metrics.responseTime.length > 0 
            ? this.metrics.responseTime.reduce((a, b) => a + b, 0) / this.metrics.responseTime.length 
            : 0;
            
        return {
            totalRequests: this.metrics.requests,
            totalErrors: this.metrics.errors,
            errorRate: this.metrics.requests > 0 ? (this.metrics.errors / this.metrics.requests) * 100 : 0,
            avgResponseTime: Math.round(avgResponseTime),
            currentMemoryUsage: process.memoryUsage(),
            uptime: process.uptime()
        };
    }
}
```

#### æ—¥å¿—ç³»ç»Ÿ

```javascript
// æ—¥å¿—ç®¡ç†ç³»ç»Ÿ
class Logger {
    constructor() {
        this.logLevels = {
            ERROR: 0,
            WARN: 1,
            INFO: 2,
            DEBUG: 3
        };
        
        this.currentLevel = this.logLevels.INFO;
        this.logFile = path.join(__dirname, 'logs', 'app.log');
        this.errorFile = path.join(__dirname, 'logs', 'error.log');
        
        this.ensureLogDirectory();
    }
    
    ensureLogDirectory() {
        const logDir = path.dirname(this.logFile);
        if (!fs.existsSync(logDir)) {
            fs.mkdirSync(logDir, { recursive: true });
        }
    }
    
    log(level, message, meta = {}) {
        if (this.logLevels[level] > this.currentLevel) {
            return;
        }
        
        const timestamp = new Date().toISOString();
        const logEntry = {
            timestamp,
            level,
            message,
            ...meta
        };
        
        // æ§åˆ¶å°è¾“å‡º
        console.log(`[${timestamp}] ${level}: ${message}`);
        
        // æ–‡ä»¶è¾“å‡º
        const logLine = JSON.stringify(logEntry) + '\n';
        fs.appendFileSync(this.logFile, logLine);
        
        // é”™è¯¯æ—¥å¿—å•ç‹¬è®°å½•
        if (level === 'ERROR') {
            fs.appendFileSync(this.errorFile, logLine);
        }
    }
    
    error(message, meta) { this.log('ERROR', message, meta); }
    warn(message, meta) { this.log('WARN', message, meta); }
    info(message, meta) { this.log('INFO', message, meta); }
    debug(message, meta) { this.log('DEBUG', message, meta); }
}
```

### ğŸ”§ ç»´æŠ¤å·¥å…·

#### æ•°æ®å¤‡ä»½

```javascript
// æ•°æ®å¤‡ä»½ç³»ç»Ÿ
class BackupManager {
    constructor() {
        this.backupDir = path.join(__dirname, 'backups');
        this.ensureBackupDirectory();
        
        // æ¯å¤©å‡Œæ™¨2ç‚¹è‡ªåŠ¨å¤‡ä»½
        this.scheduleBackup();
    }
    
    ensureBackupDirectory() {
        if (!fs.existsSync(this.backupDir)) {
            fs.mkdirSync(this.backupDir, { recursive: true });
        }
    }
    
    async createBackup() {
        const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
        const backupName = `backup_${timestamp}`;
        const backupPath = path.join(this.backupDir, backupName);
        
        try {
            // åˆ›å»ºå¤‡ä»½ç›®å½•
            fs.mkdirSync(backupPath, { recursive: true });
            
            // å¤‡ä»½æ•°æ®æ–‡ä»¶
            const dataFiles = ['movies_data.json', 'danmaku_data.json'];
            for (const file of dataFiles) {
                const sourcePath = path.join(__dirname, file);
                const targetPath = path.join(backupPath, file);
                
                if (fs.existsSync(sourcePath)) {
                    await fs.promises.copyFile(sourcePath, targetPath);
                }
            }
            
            // åˆ›å»ºå¤‡ä»½ä¿¡æ¯æ–‡ä»¶
            const backupInfo = {
                timestamp: new Date().toISOString(),
                version: '1.0.0',
                files: dataFiles,
                size: await this.calculateBackupSize(backupPath)
            };
            
            await fs.promises.writeFile(
                path.join(backupPath, 'backup_info.json'),
                JSON.stringify(backupInfo, null, 2)
            );
            
            console.log(`å¤‡ä»½åˆ›å»ºæˆåŠŸ: ${backupName}`);
            return backupPath;
            
        } catch (error) {
            console.error('å¤‡ä»½åˆ›å»ºå¤±è´¥:', error);
            throw error;
        }
    }
    
    async restoreBackup(backupName) {
        const backupPath = path.join(this.backupDir, backupName);
        
        if (!fs.existsSync(backupPath)) {
            throw new Error(`å¤‡ä»½ä¸å­˜åœ¨: ${backupName}`);
        }
        
        try {
            const dataFiles = ['movies_data.json', 'danmaku_data.json'];
            
            for (const file of dataFiles) {
                const sourcePath = path.join(backupPath, file);
                const targetPath = path.join(__dirname, file);
                
                if (fs.existsSync(sourcePath)) {
                    await fs.promises.copyFile(sourcePath, targetPath);
                }
            }
            
            console.log(`å¤‡ä»½æ¢å¤æˆåŠŸ: ${backupName}`);
            
        } catch (error) {
            console.error('å¤‡ä»½æ¢å¤å¤±è´¥:', error);
            throw error;
        }
    }
    
    scheduleBackup() {
        // æ¯24å°æ—¶æ‰§è¡Œä¸€æ¬¡å¤‡ä»½
        setInterval(() => {
            const now = new Date();
            if (now.getHours() === 2 && now.getMinutes() === 0) {
                this.createBackup();
            }
        }, 60000); // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
    }
    
    async calculateBackupSize(backupPath) {
        let totalSize = 0;
        const files = await fs.promises.readdir(backupPath);
        
        for (const file of files) {
            const filePath = path.join(backupPath, file);
            const stats = await fs.promises.stat(filePath);
            totalSize += stats.size;
        }
        
        return totalSize;
    }
}
```

---

## ğŸš€ æœªæ¥è§„åˆ’

### ğŸ“‹ å¼€å‘è·¯çº¿å›¾

#### çŸ­æœŸç›®æ ‡ (1-3ä¸ªæœˆ)

- [ ] **ç”¨æˆ·ç³»ç»Ÿ**: ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¸­å¿ƒ
- [ ] **è§‚çœ‹å†å²**: è®°å½•ç”¨æˆ·è§‚çœ‹è¿›åº¦å’Œå†å²
- [ ] **æ”¶è—åŠŸèƒ½**: ç”¨æˆ·å¯æ”¶è—å–œæ¬¢çš„å½±ç‰‡
- [ ] **è¯„åˆ†ç³»ç»Ÿ**: ç”¨æˆ·å¯å¯¹å½±ç‰‡è¿›è¡Œè¯„åˆ†
- [ ] **å¼¹å¹•å¢å¼º**: å¼¹å¹•è¿‡æ»¤ã€ä¸¾æŠ¥åŠŸèƒ½

#### ä¸­æœŸç›®æ ‡ (3-6ä¸ªæœˆ)

- [ ] **æ¨èç®—æ³•**: åŸºäºç”¨æˆ·è¡Œä¸ºçš„æ™ºèƒ½æ¨è
- [ ] **å¤šè¯­è¨€æ”¯æŒ**: å›½é™…åŒ–å’Œæœ¬åœ°åŒ–
- [ ] **ç§»åŠ¨ç«¯APP**: React Native ç§»åŠ¨åº”ç”¨
- [ ] **å®æ—¶é€šçŸ¥**: WebSocket å®æ—¶æ¶ˆæ¯æ¨é€
- [ ] **CDNé›†æˆ**: è§†é¢‘å†…å®¹åˆ†å‘ç½‘ç»œ

#### é•¿æœŸç›®æ ‡ (6-12ä¸ªæœˆ)

- [ ] **å¾®æœåŠ¡æ¶æ„**: æœåŠ¡æ‹†åˆ†å’Œå®¹å™¨åŒ–éƒ¨ç½²
- [ ] **å¤§æ•°æ®åˆ†æ**: ç”¨æˆ·è¡Œä¸ºåˆ†æå’Œæ•°æ®å¯è§†åŒ–
- [ ] **AIåŠŸèƒ½**: æ™ºèƒ½å­—å¹•ã€å†…å®¹å®¡æ ¸
- [ ] **ç›´æ’­åŠŸèƒ½**: å®æ—¶è§†é¢‘æµç›´æ’­
- [ ] **ç¤¾äº¤åŠŸèƒ½**: ç”¨æˆ·äº’åŠ¨å’Œç¤¾åŒºå»ºè®¾

### ğŸ”§ æŠ€æœ¯å‡çº§è®¡åˆ’

#### æ•°æ®åº“è¿ç§»

```javascript
// ä»JSONæ–‡ä»¶è¿ç§»åˆ°MongoDB
class DatabaseMigration {
    constructor() {
        this.mongoUrl = process.env.MONGODB_URL || 'mongodb://localhost:27017/smtfilm';
    }
    
    async migrateToMongoDB() {
        const { MongoClient } = require('mongodb');
        const client = new MongoClient(this.mongoUrl);
        
        try {
            await client.connect();
            const db = client.db('smtfilm');
            
            // è¿ç§»ç”µå½±æ•°æ®
            const moviesData = await this.loadJSONData('movies_data.json');
            if (moviesData.movies) {
                await db.collection('movies').insertMany(moviesData.movies);
            }
            
            // è¿ç§»å¼¹å¹•æ•°æ®
            const danmakuData = await this.loadJSONData('danmaku_data.json');
            const danmakuArray = this.convertDanmakuToArray(danmakuData);
            if (danmakuArray.length > 0) {
                await db.collection('danmaku').insertMany(danmakuArray);
            }
            
            console.log('æ•°æ®åº“è¿ç§»å®Œæˆ');
            
        } catch (error) {
            console.error('æ•°æ®åº“è¿ç§»å¤±è´¥:', error);
        } finally {
            await client.close();
        }
    }
    
    convertDanmakuToArray(danmakuData) {
        const result = [];
        
        for (const [key, danmakuList] of Object.entries(danmakuData)) {
            const [movieId, episodeId] = key.split('-');
            
            for (const danmaku of danmakuList) {
                result.push({
                    ...danmaku,
                    movieId: parseInt(movieId),
                    episodeId: parseInt(episodeId)
                });
            }
        }
        
        return result;
    }
}
```

#### ç¼“å­˜ç³»ç»Ÿå‡çº§

```javascript
// Redisç¼“å­˜é›†æˆ
class RedisCache {
    constructor() {
        this.redis = require('redis').createClient({
            host: process.env.REDIS_HOST || 'localhost',
            port: process.env.REDIS_PORT || 6379
        });
        
        this.redis.on('error', (err) => {
            console.error('Redisè¿æ¥é”™è¯¯:', err);
        });
    }
    
    async set(key, value, ttl = 3600) {
        try {
            const serialized = JSON.stringify(value);
            await this.redis.setex(key, ttl, serialized);
        } catch (error) {
            console.error('Redisè®¾ç½®å¤±è´¥:', error);
        }
    }
    
    async get(key) {
        try {
            const value = await this.redis.get(key);
            return value ? JSON.parse(value) : null;
        } catch (error) {
            console.error('Redisè·å–å¤±è´¥:', error);
            return null;
        }
    }
    
    async del(key) {
        try {
            await this.redis.del(key);
        } catch (error) {
            console.error('Redisåˆ é™¤å¤±è´¥:', error);
        }
    }
}
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### ğŸ“‹ è´¡çŒ®æµç¨‹

1. **Fork é¡¹ç›®**
   ```bash
   git clone https://github.com/your-username/smtfilm.git
   cd smtfilm
   ```

2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/your-feature-name
   ```

3. **å¼€å‘å’Œæµ‹è¯•**
   ```bash
   npm run dev
   npm test
   ```

4. **æäº¤æ›´æ”¹**
   ```bash
   git add .
   git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½æè¿°"
   ```

5. **æ¨é€åˆ†æ”¯**
   ```bash
   git push origin feature/your-feature-name
   ```

6. **åˆ›å»º Pull Request**

### ğŸ“ ä»£ç æäº¤è§„èŒƒ

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤bug
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: ä»£ç é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

### ğŸ› é—®é¢˜æŠ¥å‘Š

æäº¤Issueæ—¶è¯·åŒ…å«ï¼š

- **ç¯å¢ƒä¿¡æ¯**: æ“ä½œç³»ç»Ÿã€Node.jsç‰ˆæœ¬ã€æµè§ˆå™¨ç‰ˆæœ¬
- **é‡ç°æ­¥éª¤**: è¯¦ç»†çš„æ“ä½œæ­¥éª¤
- **æœŸæœ›ç»“æœ**: æœŸæœ›çš„è¡Œä¸º
- **å®é™…ç»“æœ**: å®é™…å‘ç”Ÿçš„æƒ…å†µ
- **é”™è¯¯æ—¥å¿—**: ç›¸å…³çš„é”™è¯¯ä¿¡æ¯

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) è®¸å¯è¯ã€‚

```
MIT License

Copyright (c) 2024 SMTFILM

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## ğŸ“ è”ç³»æ–¹å¼

### ğŸ”— é¡¹ç›®é“¾æ¥

- **GitHub**: [https://github.com/your-username/smtfilm](https://github.com/your-username/smtfilm)
- **Demo**: [https://smtfilm-demo.com](https://smtfilm-demo.com)
- **æ–‡æ¡£**: [https://docs.smtfilm.com](https://docs.smtfilm.com)

### ğŸ‘¥ å¼€å‘å›¢é˜Ÿ

- **é¡¹ç›®è´Ÿè´£äºº**: [@your-username](https://github.com/your-username)
- **å‰ç«¯å¼€å‘**: [@frontend-dev](https://github.com/frontend-dev)
- **åç«¯å¼€å‘**: [@backend-dev](https://github.com/backend-dev)
- **UI/UXè®¾è®¡**: [@ui-designer](https://github.com/ui-designer)

### ğŸ’¬ ç¤¾åŒºæ”¯æŒ

- **Issues**: [GitHub Issues](https://github.com/your-username/smtfilm/issues)
- **Discussions**: [GitHub Discussions](https://github.com/your-username/smtfilm/discussions)
- **Email**: support@smtfilm.com
- **QQç¾¤**: 123456789
- **å¾®ä¿¡ç¾¤**: æ‰«æäºŒç»´ç åŠ å…¥

---

<div align="center">

## ğŸŒŸ Star History

[![Star History Chart](https://api.star-history.com/svg?repos=your-username/smtfilm&type=Date)](https://star-history.com/#your-username/smtfilm&Date)

---

**æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„æ”¯æŒï¼** â¤ï¸

[![Contributors](https://contrib.rocks/image?repo=your-username/smtfilm)](https://github.com/your-username/smtfilm/graphs/contributors)

---

**äº«å—è§‚å½±æ—¶å…‰ï¼** ğŸ¿âœ¨

*Made with â¤ï¸ by SMTFILM Team*

</div>;
            });
            
            next();
        };
    }
    
    recordRequest(req, res, responseTime)